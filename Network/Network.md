구조가 3가지 중에 무엇인지 따져보는 습관



### 세 가지 네트워크 장치 구조



Inline은 공기 청정기 생각하기

=> 대표적인 장치가 "라우터"



Out of Path는 다루는 데이터 단위는 같으나, 차단/허용의 개념이 아니라, "인지"(즉 읽기) 가 주 목적

=> 보안상 이슈를 "인지" 하면 보안센서이다.

=> 네트워크 장애를 "인지"하면 장애센서 이다.



따라서, 네트워크 센서라고 하면 거의 Out Of path 구조이다.

** Tab 스위치를 통해서, 패킷을 복사받고 분석해서 센서가 결과를 알려줌.



Proxy는 데이터 단위가 "스트림 수준" => 스트림 데이터를 볼 수 있다는 장점이 있다.

(예) 10MB 파일을 보려면(=패킷에서 스트림을 얻으려면), 거의 10000개의 패킷을 조립해야 한다. 이는 굉장히 어려운 일이다.)

=> 따라서, 파일 수준의 데이터 단위를 다룰 떄, Proxy 구조를 다룬다.

=> 구조 자체는 Inline과 비슷(Drop/Bypass 기능이 있다.)

=> But, ReadOnly는 존재하지 않는다. 

(대리자를 통해서 지나가는 개념이라, 어플리케이션 전체를 모니터링 한다. )



 (노트 그림 보기)



### Inline 구조

-Inline 구조

고속도로(네트워크)에서 자동차(패킷)이 움직일 때는, 톨게이트를 반드시 통과해야 한다.



inline구조의 예) 공유기, 라우터, 방화벽(패킷 필터링 방화벽), IPS 등



=> 이처럼, 어느 한 컴퓨터에서 다른 서버로 접속할 때, 여러 Inline 장치를 거쳐서 도달하게 된다.





라우터도 "랜카드가 여러 개 달린" 컴퓨터라고 생각하면 되게 쉽다!



<라우터의 구조>

택배기사가 물건을 받았다고, 소유권이 택배기사에 있는 것이 아니듯이, 라우터는 "남의 데이터"를 받아서 byPass나 drop을 결정한다.



=> 구현은 커널모드에서 이루어진다(당연히, 입출력속도가 커널모드가 user Mode보다 훨씬 빠르기 때문이다.)



(그림 참조)

가속 NIC은, 커널모드에서 이루어지는 작업(IP 패킷 분해 등)을 하드웨어 수준에서 처리한다

=> 이는, 순전히 속도 문제 때문이다.

=> 따라서, Inline Device는 "Throughput"이라는 용어까지 있을 정도이다. 

(예를 들어 네트워크가 10Gbps 급이라도, 중간에 Router 하나가 1Gbps 급이라면 전체 네트워크 성능은 하향평준화가 될 수 밖에 없다.)

=> 그래서, 하드웨어 수준에서 들어오고 나가고를 바로 하는 것이 가장 이상적

=> 따라서, 하드웨어와 inline module(즉, s/w)의 기능의 절충안을 찾는 것이 가장 일반적.



=> 이제 정리하면, Inline Device는 들어온 패킷을 Drop하거나 pass 시킬 수 있다. 어떤 로직으로 이러한 것을 결정하는 가에 따라, Inline Device의 성격이 완전히 바뀐다.





** 여담으로, Router역시 컴퓨터이다. 따라서, 아래의 경우도 가능하다

* Router에 windows 운영체제 설치

* 내 컴퓨터에 Router에서 사용하는 OS 설치

  => 이 경우, 내 컴퓨터는 Router 역할을 한다

=> 따라서, Cisco는 단순히 H/W 회사 뿐만 아니라, Inline Device기능을 하도록 S/W 모듈과 자체 OS까지 같이 만드는 회사라고 볼 수 있다.



(지금 이 부분은 강의를 들으면서 나름의 논리대로 정리한 것. - 말을 다듬고 그림을 추가할 것.) - 23.07.25